▲ Next.js 16.1.1 (Turbopack)
- Local:         http://localhost:3000
- Network:       http://192.168.1.12:3000
- Environments: .env

✓ Starting...
⚠ The "middleware" file convention is deprecated. Please use "proxy" instead. Learn more: https://nextjs.org/docs/messages/middleware-to-proxy
✓ Ready in 1224ms
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Space"."id", "public"."Space"."name", "public"."Space"."slug", "public"."Space"."description", "public"."Space"."capacity", "public"."Space"."images", "public"."Space"."published", "public"."Space"."createdAt", "public"."Space"."updatedAt" FROM "public"."Space" WHERE "public"."Space"."published" = $1 ORDER BY "public"."Space"."name" ASC LIMIT $2 OFFSET $3
prisma:query COMMIT
 GET / 200 in 4.8s (compile: 316ms, proxy.ts: 134ms, render: 4.3s)
prisma:query BEGIN
prisma:query DEALLOCATE ALL
 GET /api/auth/session 200 in 859ms (compile: 799ms, proxy.ts: 31ms, render: 29ms)
 GET /api/auth/session 200 in 41ms (compile: 15ms, proxy.ts: 14ms, render: 12ms)
prisma:query SELECT "public"."Event"."id", "public"."Event"."title", "public"."Event"."slug", "public"."Event"."description", "public"."Event"."startTime", "public"."Event"."endTime", "public"."Event"."type"::text, "public"."Event"."published", "public"."Event"."capacity", "public"."Event"."productId", "public"."Event"."isRecurring", "public"."Event"."recurrenceRule", "public"."Event"."recurrenceEnd", "public"."Event"."googleEventId", "public"."Event"."googleCalendarId", "public"."Event"."googleColorId", "public"."Event"."createdAt", "public"."Event"."updatedAt" FROM "public"."Event" WHERE "public"."Event"."published" = $1 ORDER BY "public"."Event"."startTime" ASC OFFSET $2
prisma:query SELECT "public"."EventSpace"."id", "public"."EventSpace"."eventId", "public"."EventSpace"."spaceId", "public"."EventSpace"."createdAt" FROM "public"."EventSpace" WHERE "public"."EventSpace"."eventId" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21) OFFSET $22
prisma:query SELECT "public"."Space"."id", "public"."Space"."name", "public"."Space"."slug", "public"."Space"."description", "public"."Space"."capacity", "public"."Space"."images", "public"."Space"."published", "public"."Space"."createdAt", "public"."Space"."updatedAt" FROM "public"."Space" WHERE "public"."Space"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."EventCancellation"."id", "public"."EventCancellation"."eventId", "public"."EventCancellation"."cancelledDate", "public"."EventCancellation"."createdAt" FROM "public"."EventCancellation" WHERE "public"."EventCancellation"."eventId" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21) OFFSET $22
prisma:query COMMIT
 GET /api/events?start=2025-12-28T17:00:00.000Z&end=2026-01-18T16:59:59.999Z 200 in 3.8s (compile: 105ms, proxy.ts: 31ms, render: 3.7s)
 GET /api/auth/session 200 in 82ms (compile: 19ms, proxy.ts: 43ms, render: 20ms)
 GET /api/auth/session 200 in 31ms (compile: 6ms, proxy.ts: 12ms, render: 13ms)
prisma:error Error in PostgreSQL connection: Error { kind: Closed, cause: None }
 GET /api/auth/session 200 in 72ms (compile: 15ms, proxy.ts: 43ms, render: 14ms)
 GET /api/auth/session 200 in 27ms (compile: 6ms, proxy.ts: 11ms, render: 10ms)
 GET /api/auth/session 200 in 54ms (compile: 14ms, proxy.ts: 22ms, render: 18ms)
 GET /api/auth/session 200 in 39ms (compile: 7ms, proxy.ts: 18ms, render: 14ms)
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."Product"."id" FROM "public"."Product" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."Event"."id" FROM "public"."Event" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query COMMIT
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."Space"."id" FROM "public"."Space" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query COMMIT
prisma:query COMMIT
 GET /sign-in 404 in 244ms (compile: 199ms, proxy.ts: 19ms, render: 27ms)
 GET /sign-in 404 in 68ms (compile: 13ms, proxy.ts: 11ms, render: 44ms)
 GET /admin 200 in 4.7s (compile: 68ms, proxy.ts: 48ms, render: 4.6s)
 GET /sign-in 404 in 117ms (compile: 10ms, proxy.ts: 29ms, render: 78ms)
prisma:query COMMIT
 GET /api/auth/session 200 in 35ms (compile: 9ms, proxy.ts: 9ms, render: 17ms)
 GET /api/auth/session 200 in 29ms (compile: 4ms, proxy.ts: 9ms, render: 16ms)
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Space"."id", "public"."Space"."name", "public"."Space"."slug", "public"."Space"."description", "public"."Space"."capacity", "public"."Space"."images", "public"."Space"."published", "public"."Space"."createdAt", "public"."Space"."updatedAt" FROM "public"."Space" WHERE "public"."Space"."published" = $1 ORDER BY "public"."Space"."name" ASC LIMIT $2 OFFSET $3
prisma:query COMMIT
 GET / 200 in 1551ms (compile: 7ms, proxy.ts: 22ms, render: 1522ms)
 GET /api/auth/session 200 in 40ms (compile: 17ms, proxy.ts: 13ms, render: 10ms)
 GET /api/auth/session 200 in 23ms (compile: 4ms, proxy.ts: 9ms, render: 10ms)
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Event"."id", "public"."Event"."title", "public"."Event"."slug", "public"."Event"."description", "public"."Event"."startTime", "public"."Event"."endTime", "public"."Event"."type"::text, "public"."Event"."published", "public"."Event"."capacity", "public"."Event"."productId", "public"."Event"."isRecurring", "public"."Event"."recurrenceRule", "public"."Event"."recurrenceEnd", "public"."Event"."googleEventId", "public"."Event"."googleCalendarId", "public"."Event"."googleColorId", "public"."Event"."createdAt", "public"."Event"."updatedAt" FROM "public"."Event" WHERE "public"."Event"."published" = $1 ORDER BY "public"."Event"."startTime" ASC OFFSET $2
prisma:query SELECT "public"."EventSpace"."id", "public"."EventSpace"."eventId", "public"."EventSpace"."spaceId", "public"."EventSpace"."createdAt" FROM "public"."EventSpace" WHERE "public"."EventSpace"."eventId" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21) OFFSET $22
prisma:query SELECT "public"."Space"."id", "public"."Space"."name", "public"."Space"."slug", "public"."Space"."description", "public"."Space"."capacity", "public"."Space"."images", "public"."Space"."published", "public"."Space"."createdAt", "public"."Space"."updatedAt" FROM "public"."Space" WHERE "public"."Space"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."EventCancellation"."id", "public"."EventCancellation"."eventId", "public"."EventCancellation"."cancelledDate", "public"."EventCancellation"."createdAt" FROM "public"."EventCancellation" WHERE "public"."EventCancellation"."eventId" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21) OFFSET $22
prisma:query COMMIT
 GET /api/events?start=2025-12-28T17:00:00.000Z&end=2026-01-18T16:59:59.999Z 200 in 4.4s (compile: 5ms, proxy.ts: 16ms, render: 4.4s)
 GET /api/auth/session 200 in 114ms (compile: 30ms, proxy.ts: 59ms, render: 25ms)
 GET /api/auth/session 200 in 22ms (compile: 4ms, proxy.ts: 7ms, render: 11ms)
 GET /api/auth/csrf 200 in 28ms (compile: 9ms, proxy.ts: 12ms, render: 6ms)
 POST /api/auth/signout 200 in 26ms (compile: 4ms, proxy.ts: 11ms, render: 11ms)
prisma:query SELECT 1
prisma:query BEGIN
prisma:query DEALLOCATE ALL
 GET / 200 in 875ms (compile: 3ms, proxy.ts: 4ms, render: 868ms)
prisma:query SELECT 1
prisma:query SELECT "public"."Space"."id", "public"."Space"."name", "public"."Space"."slug", "public"."Space"."description", "public"."Space"."capacity", "public"."Space"."images", "public"."Space"."published", "public"."Space"."createdAt", "public"."Space"."updatedAt" FROM "public"."Space" WHERE "public"."Space"."published" = $1 ORDER BY "public"."Space"."name" ASC LIMIT $2 OFFSET $3
prisma:query BEGIN
prisma:query COMMIT
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Space"."id", "public"."Space"."name", "public"."Space"."slug", "public"."Space"."description", "public"."Space"."capacity", "public"."Space"."images", "public"."Space"."published", "public"."Space"."createdAt", "public"."Space"."updatedAt" FROM "public"."Space" WHERE "public"."Space"."published" = $1 ORDER BY "public"."Space"."name" ASC LIMIT $2 OFFSET $3
prisma:query COMMIT
 GET / 200 in 1824ms (compile: 2ms, proxy.ts: 8ms, render: 1814ms)
 GET /api/auth/session 200 in 40ms (compile: 22ms, proxy.ts: 11ms, render: 7ms)
 GET /api/auth/session 200 in 11ms (compile: 5ms, proxy.ts: 3ms, render: 3ms)
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Event"."id", "public"."Event"."title", "public"."Event"."slug", "public"."Event"."description", "public"."Event"."startTime", "public"."Event"."endTime", "public"."Event"."type"::text, "public"."Event"."published", "public"."Event"."capacity", "public"."Event"."productId", "public"."Event"."isRecurring", "public"."Event"."recurrenceRule", "public"."Event"."recurrenceEnd", "public"."Event"."googleEventId", "public"."Event"."googleCalendarId", "public"."Event"."googleColorId", "public"."Event"."createdAt", "public"."Event"."updatedAt" FROM "public"."Event" WHERE "public"."Event"."published" = $1 ORDER BY "public"."Event"."startTime" ASC OFFSET $2
prisma:query SELECT "public"."EventSpace"."id", "public"."EventSpace"."eventId", "public"."EventSpace"."spaceId", "public"."EventSpace"."createdAt" FROM "public"."EventSpace" WHERE "public"."EventSpace"."eventId" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21) OFFSET $22
prisma:query SELECT "public"."Space"."id", "public"."Space"."name", "public"."Space"."slug", "public"."Space"."description", "public"."Space"."capacity", "public"."Space"."images", "public"."Space"."published", "public"."Space"."createdAt", "public"."Space"."updatedAt" FROM "public"."Space" WHERE "public"."Space"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."EventCancellation"."id", "public"."EventCancellation"."eventId", "public"."EventCancellation"."cancelledDate", "public"."EventCancellation"."createdAt" FROM "public"."EventCancellation" WHERE "public"."EventCancellation"."eventId" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21) OFFSET $22
prisma:query COMMIT
 GET /api/events?start=2025-12-28T17:00:00.000Z&end=2026-01-18T16:59:59.999Z 200 in 3.5s (compile: 6ms, proxy.ts: 13ms, render: 3.5s)
 GET /auth/signin 200 in 71ms (compile: 36ms, proxy.ts: 13ms, render: 21ms)
 GET /auth/signup 200 in 62ms (compile: 24ms, proxy.ts: 12ms, render: 26ms)
prisma:query SELECT 1
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE ("public"."User"."email" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query INSERT INTO "public"."User" ("name","email","password","role","createdAt","updatedAt") VALUES ($1,$2,$3,CAST($4::text AS "public"."UserRole"),$5,$6) RETURNING "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."createdAt", "public"."User"."updatedAt"
prisma:query COMMIT
 POST /api/auth/register 201 in 4.0s (compile: 297ms, proxy.ts: 13ms, render: 3.7s)
 GET /api/auth/providers 200 in 20ms (compile: 9ms, proxy.ts: 4ms, render: 6ms)
 GET /api/auth/csrf 200 in 13ms (compile: 4ms, proxy.ts: 4ms, render: 5ms)
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE ("public"."User"."email" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."User"."id", "public"."User"."role"::text FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
 POST /api/auth/callback/credentials? 200 in 4.0s (compile: 3ms, proxy.ts: 4ms, render: 4.0s)
 GET /api/auth/session 200 in 33ms (compile: 12ms, proxy.ts: 11ms, render: 10ms)
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT 1
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Space"."id", "public"."Space"."name", "public"."Space"."slug", "public"."Space"."description", "public"."Space"."capacity", "public"."Space"."images", "public"."Space"."published", "public"."Space"."createdAt", "public"."Space"."updatedAt" FROM "public"."Space" WHERE "public"."Space"."published" = $1 ORDER BY "public"."Space"."name" ASC LIMIT $2 OFFSET $3
prisma:query COMMIT
 GET / 200 in 1932ms (compile: 3ms, proxy.ts: 8ms, render: 1921ms)
prisma:query SELECT "public"."Space"."id", "public"."Space"."name", "public"."Space"."slug", "public"."Space"."description", "public"."Space"."capacity", "public"."Space"."images", "public"."Space"."published", "public"."Space"."createdAt", "public"."Space"."updatedAt" FROM "public"."Space" WHERE "public"."Space"."published" = $1 ORDER BY "public"."Space"."name" ASC LIMIT $2 OFFSET $3
prisma:query COMMIT
 GET / 200 in 2.4s (compile: 2ms, proxy.ts: 7ms, render: 2.4s)
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Event"."id", "public"."Event"."title", "public"."Event"."slug", "public"."Event"."description", "public"."Event"."startTime", "public"."Event"."endTime", "public"."Event"."type"::text, "public"."Event"."published", "public"."Event"."capacity", "public"."Event"."productId", "public"."Event"."isRecurring", "public"."Event"."recurrenceRule", "public"."Event"."recurrenceEnd", "public"."Event"."googleEventId", "public"."Event"."googleCalendarId", "public"."Event"."googleColorId", "public"."Event"."createdAt", "public"."Event"."updatedAt" FROM "public"."Event" WHERE "public"."Event"."published" = $1 ORDER BY "public"."Event"."startTime" ASC OFFSET $2
prisma:query SELECT "public"."EventSpace"."id", "public"."EventSpace"."eventId", "public"."EventSpace"."spaceId", "public"."EventSpace"."createdAt" FROM "public"."EventSpace" WHERE "public"."EventSpace"."eventId" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21) OFFSET $22
prisma:query SELECT "public"."Space"."id", "public"."Space"."name", "public"."Space"."slug", "public"."Space"."description", "public"."Space"."capacity", "public"."Space"."images", "public"."Space"."published", "public"."Space"."createdAt", "public"."Space"."updatedAt" FROM "public"."Space" WHERE "public"."Space"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."EventCancellation"."id", "public"."EventCancellation"."eventId", "public"."EventCancellation"."cancelledDate", "public"."EventCancellation"."createdAt" FROM "public"."EventCancellation" WHERE "public"."EventCancellation"."eventId" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21) OFFSET $22
prisma:query COMMIT
 GET /api/events?start=2025-12-28T17:00:00.000Z&end=2026-01-18T16:59:59.999Z 200 in 3.7s (compile: 2ms, proxy.ts: 8ms, render: 3.7s)
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Event"."id", "public"."Event"."title", "public"."Event"."slug", "public"."Event"."description", "public"."Event"."startTime", "public"."Event"."endTime", "public"."Event"."type"::text, "public"."Event"."published", "public"."Event"."capacity", "public"."Event"."productId", "public"."Event"."isRecurring", "public"."Event"."recurrenceRule", "public"."Event"."recurrenceEnd", "public"."Event"."googleEventId", "public"."Event"."googleCalendarId", "public"."Event"."googleColorId", "public"."Event"."createdAt", "public"."Event"."updatedAt" FROM "public"."Event" WHERE "public"."Event"."published" = $1 ORDER BY "public"."Event"."startTime" ASC OFFSET $2
prisma:query SELECT "public"."EventSpace"."id", "public"."EventSpace"."eventId", "public"."EventSpace"."spaceId", "public"."EventSpace"."createdAt" FROM "public"."EventSpace" WHERE "public"."EventSpace"."eventId" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21) OFFSET $22
prisma:query SELECT "public"."Space"."id", "public"."Space"."name", "public"."Space"."slug", "public"."Space"."description", "public"."Space"."capacity", "public"."Space"."images", "public"."Space"."published", "public"."Space"."createdAt", "public"."Space"."updatedAt" FROM "public"."Space" WHERE "public"."Space"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."EventCancellation"."id", "public"."EventCancellation"."eventId", "public"."EventCancellation"."cancelledDate", "public"."EventCancellation"."createdAt" FROM "public"."EventCancellation" WHERE "public"."EventCancellation"."eventId" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21) OFFSET $22
prisma:query COMMIT
 GET /api/events?start=2025-12-28T17:00:00.000Z&end=2026-01-18T16:59:59.999Z 200 in 4.1s (compile: 6ms, proxy.ts: 16ms, render: 4.1s)
 GET /api/auth/session 200 in 114ms (compile: 30ms, proxy.ts: 52ms, render: 32ms)
 GET /api/auth/session 200 in 18ms (compile: 4ms, proxy.ts: 6ms, render: 7ms)
prisma:query SELECT 1
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Space"."id", "public"."Space"."name", "public"."Space"."slug", "public"."Space"."description", "public"."Space"."capacity", "public"."Space"."images", "public"."Space"."published", "public"."Space"."createdAt", "public"."Space"."updatedAt" FROM "public"."Space" WHERE "public"."Space"."published" = $1 ORDER BY "public"."Space"."name" ASC LIMIT $2 OFFSET $3
 GET / 200 in 1759ms (compile: 9ms, proxy.ts: 20ms, render: 1730ms)
prisma:query COMMIT
prisma:query BEGIN
prisma:query SELECT 1
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query SELECT "public"."GoogleCalendarCredential"."id", "public"."GoogleCalendarCredential"."userId", "public"."GoogleCalendarCredential"."encryptedRefreshToken", "public"."GoogleCalendarCredential"."googleAccountEmail", "public"."GoogleCalendarCredential"."googleAccountId", "public"."GoogleCalendarCredential"."selectedCalendarIds", "public"."GoogleCalendarCredential"."syncToken", "public"."GoogleCalendarCredential"."lastSyncAt", "public"."GoogleCalendarCredential"."createdAt", "public"."GoogleCalendarCredential"."updatedAt" FROM "public"."GoogleCalendarCredential" WHERE ("public"."GoogleCalendarCredential"."userId" = $1 AND 1=1) LIMIT $2 OFFSET $3
 GET /api/auth/session 200 in 38ms (compile: 12ms, proxy.ts: 15ms, render: 11ms)
 GET /api/auth/session 200 in 19ms (compile: 3ms, proxy.ts: 8ms, render: 8ms)
prisma:query COMMIT
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."Event"."id" FROM "public"."Event" WHERE "public"."Event"."googleEventId" IS NOT NULL OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."Event"."id" FROM "public"."Event" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query COMMIT
prisma:query COMMIT
 GET /admin/schedule 200 in 3.6s (compile: 40ms, proxy.ts: 27ms, render: 3.5s)
 GET /api/auth/google/calendar/start?returnUrl=/admin/schedule 307 in 65ms (compile: 31ms, proxy.ts: 23ms, render: 10ms)
[Calendar Callback] Received params: { hasCode: true, hasState: true, error: null }
[Calendar Callback] State decoded: { userId: 2, returnUrl: '/admin/schedule' }
[Calendar Callback] Exchanging code for tokens...
[Calendar Callback] Got tokens: { hasAccessToken: true, hasRefreshToken: true }
[Calendar Callback] Fetching Google user info...
[Calendar Callback] Got user info: { email: undefined, id: undefined }
[Calendar Callback] Saving credential to database for userId: 2
prisma:query SELECT 1
prisma:error 
Invalid `__TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$db$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["db"].googleCalendarCredential.upsert()` invocation in
/Users/neil/Projects/dreamscape/website/.next/dev/server/chunks/[root-of-the-server]__c6cbcf5e._.js:255:173

  252 // Encrypt and store refresh token
  253 const encryptedToken = (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$google$2d$calendar$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["encryptRefreshToken"])(tokens.refresh_token);
  254 console.log('[Calendar Callback] Saving credential to database for userId:', userId);
→ 255 const credential = await __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$db$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["db"].googleCalendarCredential.upsert({
        where: {
          userId: 2
        },
        create: {
          userId: 2,
          encryptedRefreshToken: "d297d6821afcb7263a3453146758a3b5:18c76f903b4e060165b4277202e551fc740f3180b9678c988b4bfe3e7b368867335e4b068bee704d2e7ca288445aba02ec3ca06261f542d59fde91120f5c527d8eb0bca4e96a33aefb7faafe68638e7b9287b8682f11a789bce1f5b8f05972ea731c56a4837f7be0e22047fccd5f9206",
          googleAccountId: undefined,
          selectedCalendarIds: [
            "primary"
          ],
      +   googleAccountEmail: String
        },
        update: {
          encryptedRefreshToken: "d297d6821afcb7263a3453146758a3b5:18c76f903b4e060165b4277202e551fc740f3180b9678c988b4bfe3e7b368867335e4b068bee704d2e7ca288445aba02ec3ca06261f542d59fde91120f5c527d8eb0bca4e96a33aefb7faafe68638e7b9287b8682f11a789bce1f5b8f05972ea731c56a4837f7be0e22047fccd5f9206",
          googleAccountEmail: undefined,
          googleAccountId: undefined
        }
      })

Argument `googleAccountEmail` is missing.
[Calendar Callback] Error in Google Calendar callback: Error [PrismaClientValidationError]: 
Invalid `__TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$db$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["db"].googleCalendarCredential.upsert()` invocation in
/Users/neil/Projects/dreamscape/website/.next/dev/server/chunks/[root-of-the-server]__c6cbcf5e._.js:255:173

  252 // Encrypt and store refresh token
  253 const encryptedToken = (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$google$2d$calendar$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["encryptRefreshToken"])(tokens.refresh_token);
  254 console.log('[Calendar Callback] Saving credential to database for userId:', userId);
→ 255 const credential = await __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$db$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["db"].googleCalendarCredential.upsert({
        where: {
          userId: 2
        },
        create: {
          userId: 2,
          encryptedRefreshToken: "d297d6821afcb7263a3453146758a3b5:18c76f903b4e060165b4277202e551fc740f3180b9678c988b4bfe3e7b368867335e4b068bee704d2e7ca288445aba02ec3ca06261f542d59fde91120f5c527d8eb0bca4e96a33aefb7faafe68638e7b9287b8682f11a789bce1f5b8f05972ea731c56a4837f7be0e22047fccd5f9206",
          googleAccountId: undefined,
          selectedCalendarIds: [
            "primary"
          ],
      +   googleAccountEmail: String
        },
        update: {
          encryptedRefreshToken: "d297d6821afcb7263a3453146758a3b5:18c76f903b4e060165b4277202e551fc740f3180b9678c988b4bfe3e7b368867335e4b068bee704d2e7ca288445aba02ec3ca06261f542d59fde91120f5c527d8eb0bca4e96a33aefb7faafe68638e7b9287b8682f11a789bce1f5b8f05972ea731c56a4837f7be0e22047fccd5f9206",
          googleAccountEmail: undefined,
          googleAccountId: undefined
        }
      })

Argument `googleAccountEmail` is missing.
    at <unknown> (app/api/auth/google/calendar/callback/route.ts:69:58)
    at async GET (app/api/auth/google/calendar/callback/route.ts:69:24)
  67 |
  68 |     console.log('[Calendar Callback] Saving credential to database for userId:', userId)
> 69 |     const credential = await db.googleCalendarCredential.upsert({
     |                                                          ^
  70 |       where: { userId },
  71 |       create: {
  72 |         userId, {
  clientVersion: '6.19.1'
}
[Calendar Callback] Error stack: PrismaClientValidationError: 
Invalid `__TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$db$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["db"].googleCalendarCredential.upsert()` invocation in
/Users/neil/Projects/dreamscape/website/.next/dev/server/chunks/[root-of-the-server]__c6cbcf5e._.js:255:173

  252 // Encrypt and store refresh token
  253 const encryptedToken = (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$google$2d$calendar$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["encryptRefreshToken"])(tokens.refresh_token);
  254 console.log('[Calendar Callback] Saving credential to database for userId:', userId);
→ 255 const credential = await __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$db$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["db"].googleCalendarCredential.upsert({
        where: {
          userId: 2
        },
        create: {
          userId: 2,
          encryptedRefreshToken: "d297d6821afcb7263a3453146758a3b5:18c76f903b4e060165b4277202e551fc740f3180b9678c988b4bfe3e7b368867335e4b068bee704d2e7ca288445aba02ec3ca06261f542d59fde91120f5c527d8eb0bca4e96a33aefb7faafe68638e7b9287b8682f11a789bce1f5b8f05972ea731c56a4837f7be0e22047fccd5f9206",
          googleAccountId: undefined,
          selectedCalendarIds: [
            "primary"
          ],
      +   googleAccountEmail: String
        },
        update: {
          encryptedRefreshToken: "d297d6821afcb7263a3453146758a3b5:18c76f903b4e060165b4277202e551fc740f3180b9678c988b4bfe3e7b368867335e4b068bee704d2e7ca288445aba02ec3ca06261f542d59fde91120f5c527d8eb0bca4e96a33aefb7faafe68638e7b9287b8682f11a789bce1f5b8f05972ea731c56a4837f7be0e22047fccd5f9206",
          googleAccountEmail: undefined,
          googleAccountId: undefined
        }
      })

Argument `googleAccountEmail` is missing.
    at Nn (/Users/neil/Projects/dreamscape/website/node_modules/@prisma/client/runtime/library.js:29:1363)
    at ei.handleRequestError (/Users/neil/Projects/dreamscape/website/node_modules/@prisma/client/runtime/library.js:121:6911)
    at ei.handleAndLogRequestError (/Users/neil/Projects/dreamscape/website/node_modules/@prisma/client/runtime/library.js:121:6593)
    at ei.request (/Users/neil/Projects/dreamscape/website/node_modules/@prisma/client/runtime/library.js:121:6300)
    at async a (/Users/neil/Projects/dreamscape/website/node_modules/@prisma/client/runtime/library.js:130:9551)
    at async GET (/Users/neil/Projects/dreamscape/website/.next/dev/server/chunks/[root-of-the-server]__c6cbcf5e._.js:255:28)
    at async AppRouteRouteModule.do (/Users/neil/Projects/dreamscape/website/node_modules/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js:5:37866)
    at async AppRouteRouteModule.handle (/Users/neil/Projects/dreamscape/website/node_modules/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js:5:45156)
    at async responseGenerator (/Users/neil/Projects/dreamscape/website/.next/dev/server/chunks/[root-of-the-server]__dcec24e3._.js:14849:38)
    at async AppRouteRouteModule.handleResponse (/Users/neil/Projects/dreamscape/website/node_modules/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js:1:187713)
    at async handleResponse (/Users/neil/Projects/dreamscape/website/.next/dev/server/chunks/[root-of-the-server]__dcec24e3._.js:14912:32)
    at async Module.handler (/Users/neil/Projects/dreamscape/website/.next/dev/server/chunks/[root-of-the-server]__dcec24e3._.js:14965:13)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/neil/Projects/dreamscape/website/node_modules/next/dist/server/base-server.js:1422:9)
    at async DevServer.renderPageComponent (/Users/neil/Projects/dreamscape/website/node_modules/next/dist/server/base-server.js:1474:24)
    at async DevServer.renderToResponseImpl (/Users/neil/Projects/dreamscape/website/node_modules/next/dist/server/base-server.js:1524:32)
    at async DevServer.pipeImpl (/Users/neil/Projects/dreamscape/website/node_modules/next/dist/server/base-server.js:1018:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/neil/Projects/dreamscape/website/node_modules/next/dist/server/next-server.js:395:17)
    at async DevServer.handleRequestImpl (/Users/neil/Projects/dreamscape/website/node_modules/next/dist/server/base-server.js:909:17)
    at async /Users/neil/Projects/dreamscape/website/node_modules/next/dist/server/dev/next-dev-server.js:387:20
    at async Span.traceAsyncFn (/Users/neil/Projects/dreamscape/website/node_modules/next/dist/trace/trace.js:157:20)
    at async DevServer.handleRequest (/Users/neil/Projects/dreamscape/website/node_modules/next/dist/server/dev/next-dev-server.js:383:24)
    at async invokeRender (/Users/neil/Projects/dreamscape/website/node_modules/next/dist/server/lib/router-server.js:248:21)
    at async handleRequest (/Users/neil/Projects/dreamscape/website/node_modules/next/dist/server/lib/router-server.js:447:24)
    at async requestHandlerImpl (/Users/neil/Projects/dreamscape/website/node_modules/next/dist/server/lib/router-server.js:496:13)
    at async Server.requestListener (/Users/neil/Projects/dreamscape/website/node_modules/next/dist/server/lib/start-server.js:226:13)
 GET /api/auth/google/calendar/callback?state=eyJ1c2VySWQiOjIsImNzcmYiOiJhODM0NGQ5MGQ5YWUyOTg4YmVmYTIwZWY1NTJmODNkMSIsInJldHVyblVybCI6Ii9hZG1pbi9zY2hlZHVsZSJ9&code=4/0ATX87lOq9-cIfZ5Lm8a9E_8kLPl6SPcMZFzDH70s9AgAKFKAuLQL7X67Io9c9009aCe4iw&scope=https://www.googleapis.com/auth/calendar.readonly 307 in 2.9s (compile: 30ms, proxy.ts: 20ms, render: 2.9s)
prisma:query SELECT 1
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."GoogleCalendarCredential"."id", "public"."GoogleCalendarCredential"."userId", "public"."GoogleCalendarCredential"."encryptedRefreshToken", "public"."GoogleCalendarCredential"."googleAccountEmail", "public"."GoogleCalendarCredential"."googleAccountId", "public"."GoogleCalendarCredential"."selectedCalendarIds", "public"."GoogleCalendarCredential"."syncToken", "public"."GoogleCalendarCredential"."lastSyncAt", "public"."GoogleCalendarCredential"."createdAt", "public"."GoogleCalendarCredential"."updatedAt" FROM "public"."GoogleCalendarCredential" WHERE ("public"."GoogleCalendarCredential"."userId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
 GET /api/auth/session 200 in 26ms (compile: 8ms, proxy.ts: 7ms, render: 11ms)
prisma:query COMMIT
 GET /api/auth/session 200 in 29ms (compile: 2ms, proxy.ts: 6ms, render: 20ms)
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."Event"."id" FROM "public"."Event" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."Event"."id" FROM "public"."Event" WHERE "public"."Event"."googleEventId" IS NOT NULL OFFSET $1) AS "sub"
prisma:query COMMIT
prisma:query COMMIT
 GET /admin/schedule?error=callback_failed 200 in 3.7s (compile: 5ms, proxy.ts: 13ms, render: 3.7s)
